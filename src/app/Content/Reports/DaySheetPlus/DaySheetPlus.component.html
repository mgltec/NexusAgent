<h4>Daysheet Plus</h4>
<h6><span>Daysheet Plus for agent: {{_currentUser.AgentSelected}} Week: {{_dateRange.Start | date}}</span></h6>
<div>

  <table datatable [dtOptions]="dtOptions" class="table table-striped table-bordered table-sm"  *ngIf="!_loadingReport">
    <thead class="table-dark">
       <tr *ngFor="let repHeader of reportHeaders; let x = index" >
         <th>PLAYER / AGENT</th>
         <th class="text-right">{{repHeader.day1 | date: 'EEEE' | uppercase}}</th>
         <th class="text-right">{{repHeader.day2 | date: 'EEEE' | uppercase}}</th>
         <th class="text-right">{{repHeader.day3 | date: 'EEEE' | uppercase}}</th>
         <th class="text-right">{{repHeader.day4 | date: 'EEEE' | uppercase}}</th>
         <th class="text-right">{{repHeader.day5 | date: 'EEEE' | uppercase}}</th>
         <th class="text-right">{{repHeader.day6 | date: 'EEEE' | uppercase}}</th>
         <th class="text-right">{{repHeader.day7 | date: 'EEEE' | uppercase}}</th>
         <th class="text-right">TOTAL</th>
         <th class="text-right">PENDING</th>
         <th class="text-right">BALANCE</th>
         <th class="text-right" *ngIf="allowSettleFigure==true" class="text-right">SETTLE FIGURE</th>
         <th class="text-center">PLAYERS UTILITIES</th>
       </tr>
     </thead>
     <tbody>
      <ng-container *ngFor="let rep of reportData; let x = index" >
          <ng-container *ngIf="allPlayers == true">  <!--Show all player with or without activity-->
                <tr  [ngStyle]="{'background-color': (rep.IsPlayer == false) ? '#ADCCF8': (rep.IsPlayer== true) ? '#'+rep.RowColor :''}" class="text-right" >
                    <ng-container *ngIf="rep.IsPlayer == true">
                        <td class="text-left link"  *ngIf="rep.IsSpecialPlayer==true && allowTransfer==true"><a (click)="PlayerTransferModal(rep)" > {{rep.Name}} <label *ngIf="showPassword==true">({{rep.Password}})</label></a>  <i class='fa fa-info-circle float-right link'  (click)="PlayerInformationModal(rep)"></i> </td>
                        <td class="text-left"  *ngIf="rep.IsSpecialPlayer!=true || allowTransfer!=true"> {{rep.Name}} <label *ngIf="showPassword==true">({{rep.Password}})</label><i class='fa fa-info-circle float-right link'    (click)="PlayerInformationModal(rep)"></i> </td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day1)"> {{rep.Day1}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day2)"> {{rep.Day2}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day3)"> {{rep.Day3}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day4)"> {{rep.Day4}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day5)"> {{rep.Day5}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day6)"> {{rep.Day6}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day7)"> {{rep.Day7}} </a></td>
                        <td>{{rep.Day1 + rep.Day2 + rep.Day3 + rep.Day4 + rep.Day5 + rep.Day6 + rep.Day7}}</td>
                        <td class="link"><a (click)="PlayerPendingModal(rep.ID)"> {{rep.Pending}} </a></td>
                        <td>{{rep.Balance}}</td>
                        <ng-container *ngIf="allowSettleFigure==true">
                          <td>{{rep.SettleFigure}}</td>
                        </ng-container>
                        <td class="text-center">
                          <button  title="Note" type="button" class="btn btn-outline-info btn-sm"(click)="PlayerNoteModal(rep)"><i class="fas fa-edit"></i></button>
                          <!-- <button  title="Highlight Color" type="button" class="btn btn-outline-info btn-sm"(click)="HightlightColorModal(rep)"><i class="fas fa-tint"></i></button>
                          <button  title="Online Message" type="button" class="btn btn-outline-info btn-sm"(click)="PlayerOnlineMessageModal(rep)"><i class="fas fa-envelope"></i></button> -->
                        </td>
                      </ng-container>
                    <ng-container *ngIf="rep.IsPlayer == false">
                      <td class="text-left link" *ngIf="allowTransfer==true"><a (click)="AgentTransferModal(rep)" > {{rep.Name}} </a> <i class='fa fa-info-circle float-right link' (click)="AgentInformationModal(rep)"></i> </td>
                      <td class="text-left" *ngIf="allowTransfer!=true"> {{rep.Name}} <i class='fa fa-info-circle float-right link'   (click)="AgentInformationModal(rep)"></i> </td>
                      <td>{{rep.Day1}}</td>
                      <td>{{rep.Day2}}</td>
                      <td>{{rep.Day3}}</td>
                      <td>{{rep.Day4}}</td>
                      <td>{{rep.Day5}}</td>
                      <td>{{rep.Day6}}</td>
                      <td>{{rep.Day7}}</td>
                      <td>{{rep.Day1 + rep.Day2 + rep.Day3 + rep.Day4 + rep.Day5 + rep.Day6 + rep.Day7}}</td>
                      <td>{{rep.Pending}}</td>
                      <td>{{rep.Balance}}</td>
                      <ng-container *ngIf="allowSettleFigure==true">
                        <td></td>
                       </ng-container>
                       <td></td>
                    </ng-container>
                </tr>
            </ng-container>
            <ng-container *ngIf="allPlayers == false">  <!--Show all player with activity-->
              <ng-container *ngIf="(actionTypeSelected == 'AP') && (rep.Pending != 0 || rep.Balance != 0)">  <!--Action Type Total Pending balance-->
                  <tr  [ngStyle]="{'background-color': (rep.IsPlayer == false) ? '#ADCCF8': (rep.IsPlayer== true) ? '#'+rep.RowColor :''}" class="text-right" >
                      <ng-container *ngIf="rep.IsPlayer == true">
                        <td class="text-left link" *ngIf="rep.IsSpecialPlayer==true && allowTransfer==true"><a (click)="PlayerTransferModal(rep)" > {{rep.Name}} <label *ngIf="showPassword==true">({{rep.Password}})</label> </a> <i class='fa fa-info-circle float-right link'  (click)="PlayerInformationModal(rep)"></i> </td>
                        <td class="text-left" *ngIf="rep.IsSpecialPlayer!=true || allowTransfer!=true"> {{rep.Name}} <label *ngIf="showPassword==true">({{rep.Password}})</label><i class='fa fa-info-circle float-right link'    (click)="PlayerInformationModal(rep)"></i> </td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day1)"> {{rep.Day1}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day2)"> {{rep.Day2}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day3)"> {{rep.Day3}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day4)"> {{rep.Day4}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day5)"> {{rep.Day5}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day6)"> {{rep.Day6}} </a></td>
                        <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day7)"> {{rep.Day7}} </a></td>
                        <td>{{rep.Day1 + rep.Day2 + rep.Day3 + rep.Day4 + rep.Day5 + rep.Day6 + rep.Day7}}</td>
                        <td class="link"><a (click)="PlayerPendingModal(rep.ID)"> {{rep.Pending}} </a></td>
                        <td>{{rep.Balance}}</td>
                        <ng-container *ngIf="allowSettleFigure==true">
                            <td>{{rep.SettleFigure}}</td>
                        </ng-container>
                        <td class="text-center">
                          <button  title="Note" type="button" class="btn btn-outline-info btn-sm"(click)="PlayerNoteModal(rep)"><i class="fas fa-edit"></i></button>
                          <button  title="Highlight Color" type="button" class="btn btn-outline-info btn-sm"(click)="HightlightColorModal(rep)"><i class="fas fa-tint"></i></button>
                          <button  title="Online Message" type="button" class="btn btn-outline-info btn-sm"(click)="PlayerOnlineMessageModal(rep)"><i class="fas fa-envelope"></i></button>
                        </td>
                      </ng-container>
                      <ng-container *ngIf="rep.IsPlayer == false">
                        <td class="text-left link" *ngIf="allowTransfer==true"><a (click)="AgentTransferModal(rep)" > {{rep.Name}} </a> <i class='fa fa-info-circle float-right link' (click)="AgentInformationModal(rep)"></i> </td>
                        <td class="text-left" *ngIf="allowTransfer!=true"> {{rep.Name}} <i class='fa fa-info-circle float-right link'   (click)="AgentInformationModal(rep)"></i> </td>
                        <td>{{rep.Day1}}</td>
                        <td>{{rep.Day2}}</td>
                        <td>{{rep.Day3}}</td>
                        <td>{{rep.Day4}}</td>
                        <td>{{rep.Day5}}</td>
                        <td>{{rep.Day6}}</td>
                        <td>{{rep.Day7}}</td>
                        <td>{{rep.Day1 + rep.Day2 + rep.Day3 + rep.Day4 + rep.Day5 + rep.Day6 + rep.Day7}}</td>
                        <td>{{rep.Pending}}</td>
                        <td>{{rep.Balance}}</td>
                        <ng-container *ngIf="allowSettleFigure==true">
                          <td></td>
                        </ng-container>
                        <td></td>
                      </ng-container>
                   </tr>
              </ng-container>
              <ng-container *ngIf="(actionTypeSelected != 'AP') && (rep.Day1 != 0 || rep.Day2 != 0 || rep.Day3 != 0 || rep.Day4 != 0 ||rep.Day5 != 0 ||rep.Day6 != 0 ||rep.Day7 != 0)">  <!--By Action Type-->
                <tr [ngStyle]="{'background-color': (rep.IsPlayer == false) ? '#ADCCF8': (rep.IsPlayer== true) ? '#'+rep.RowColor :''}" class="text-right" >
                    <ng-container *ngIf="rep.IsPlayer == true">
                      <td class="text-left link" *ngIf="rep.IsSpecialPlayer==true && allowTransfer==true"><a (click)="PlayerTransferModal(rep)" > {{rep.Name}} <label *ngIf="showPassword==true">({{rep.Password}})</label> </a> <i class='fa fa-info-circle float-right link'  (click)="PlayerInformationModal(rep)"></i> </td>
                      <td class="text-left" *ngIf="rep.IsSpecialPlayer!=true || allowTransfer!=true"> {{rep.Name}} <label *ngIf="showPassword==true">({{rep.Password}})</label><i class='fa fa-info-circle float-right link'    (click)="PlayerInformationModal(rep)"></i> </td>
                      <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day1)"> {{rep.Day1}} </a></td>
                      <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day2)"> {{rep.Day2}} </a></td>
                      <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day3)"> {{rep.Day3}} </a></td>
                      <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day4)"> {{rep.Day4}} </a></td>
                      <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day5)"> {{rep.Day5}} </a></td>
                      <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day6)"> {{rep.Day6}} </a></td>
                      <td class="link"><a (click)="PlayerHistoryModal(rep,reportHeaders[0].day7)"> {{rep.Day7}} </a></td>
                      <td>{{rep.Day1 + rep.Day2 + rep.Day3 + rep.Day4 + rep.Day5 + rep.Day6 + rep.Day7}}</td>
                      <td class="link"><a (click)="PlayerPendingModal(rep.ID)"> {{rep.Pending}} </a></td>
                      <td>{{rep.Balance}}</td>
                      <ng-container *ngIf="allowSettleFigure==true">
                          <td>{{rep.SettleFigure}}</td>
                      </ng-container>
                      <td class="text-center">
                        <button  title="Note" type="button" class="btn btn-outline-info btn-sm"(click)="PlayerNoteModal(rep)"><i class="fas fa-edit"></i></button>
                        <button  title="Highlight Color" type="button" class="btn btn-outline-info btn-sm"(click)="HightlightColorModal(rep)"><i class="fas fa-tint"></i></button>
                        <button  title="Online Message" type="button" class="btn btn-outline-info btn-sm"(click)="PlayerOnlineMessageModal(rep)"><i class="fas fa-envelope"></i></button>
                      </td>
                    </ng-container>
                    <ng-container *ngIf="rep.IsPlayer == false">
                      <td class="text-left link" *ngIf="allowTransfer==true"><a (click)="AgentTransferModal(rep)" > {{rep.Name}} </a> <i class='fa fa-info-circle float-right link' (click)="AgentInformationModal(rep)"></i> </td>
                      <td class="text-left" *ngIf="allowTransfer!=true"> {{rep.Name}} <i class='fa fa-info-circle float-right link'   (click)="AgentInformationModal(rep)"></i> </td>
                      <td>{{rep.Day1}}</td>
                      <td>{{rep.Day2}}</td>
                      <td>{{rep.Day3}}</td>
                      <td>{{rep.Day4}}</td>
                      <td>{{rep.Day5}}</td>
                      <td>{{rep.Day6}}</td>
                      <td>{{rep.Day7}}</td>
                      <td>{{rep.Day1 + rep.Day2 + rep.Day3 + rep.Day4 + rep.Day5 + rep.Day6 + rep.Day7}}</td>
                      <td>{{rep.Pending}}</td>
                      <td>{{rep.Balance}}</td>
                      <ng-container *ngIf="allowSettleFigure==true">
                        <td></td>
                      </ng-container>
                      <td></td>
                    </ng-container>
                  </tr>
            </ng-container>
          </ng-container>
        </ng-container>
      </tbody>
      <tfoot>
          <tr style="background-color: #365483; color: #FFFFFF;" class="text-right">
              <td class="text-left" ><B>TOTAL :</B></td>
              <td><B>{{reportData[reportData.length-1].TotalDay1}}</B></td>
              <td><B>{{reportData[reportData.length-1].TotalDay2}}</B></td>
              <td><B>{{reportData[reportData.length-1].TotalDay3}}</B></td>
              <td><B>{{reportData[reportData.length-1].TotalDay4}}</B></td>
              <td><B>{{reportData[reportData.length-1].TotalDay5}}</B></td>
              <td><B>{{reportData[reportData.length-1].TotalDay6}}</B></td>
              <td><B>{{reportData[reportData.length-1].TotalDay7}}</B></td>
              <td><B>{{reportData[reportData.length-1].TotalTotals}}</B></td>
              <td *ngIf="actionTypeSelected == 'AP'"><B>{{reportData[reportData.length-1].totalPending}}</B></td>
              <td *ngIf="actionTypeSelected != 'AP'"><B>{{reportData[reportData.length-1].totalPendingbytype}}</B></td>
              <td *ngIf="actionTypeSelected == 'AP'"><B>{{reportData[reportData.length-1].totalBalance}}</B></td>
              <td *ngIf="actionTypeSelected != 'AP'"><B>{{reportData[reportData.length-1].totalBalancebytype}}</B></td>
              <td *ngIf="allowSettleFigure==true"></td>
              <td></td>
          </tr>
          <tr style="background-color: #D0E9C6; color: #3C763D;" class="text-right">
            <ng-container *ngIf="allPlayers == true">
              <td  class="text-left"><B>TOTAL PLAYERS: {{reportData[reportData.length-1].totalPlayers}}</B></td>
            </ng-container>
            <ng-container *ngIf="allPlayers == false">
              <td *ngIf="actionTypeSelected == 'AP'" class="text-left"><B>TOTAL PLAYERS: {{reportData[reportData.length-1].totalActivePlayers}}</B></td>
              <td *ngIf="actionTypeSelected != 'AP'" class="text-left"><B>TOTAL PLAYERS: {{reportData[reportData.length-1].totalPlayersbytype}}</B></td>
            </ng-container>
            <td [colSpan]="12"><B></B></td>
          </tr>
      </tfoot>
    </table>
</div>


<p-sidebar [(visible)]="display" styleClass="p-sidebar-md" (onHide)="hideFilters()">
  <h5>Filters</h5>
  <hr>
  <div class="form-group mb-3">
    <label for="txtdateWeek">Week Date:</label>
    <input type="date" class="form-control" id="txtdateFrom" [(ngModel)]="_dateRange.Start"
      (ngModelChange)="_dateRange.Start = $event" aria-describedby="datefrom">
  </div>
  <div class="form-group  mb-3 form-check">
    <input type="checkbox" class="form-check-input" id="chkallPlayers" [(ngModel)]="allPlayers">
    <label class="form-check-label" for="allPlayers">AllPlayers</label>
  </div>
  <div class="form-group mb-3">
    <label for="txtActionType">Action Type</label>
    <select [(ngModel)]="actionTypeSelected" class="custom-select" (change)="GetReport()">
      <option value="AP">Total/Pending/Balance</option>
      <option value="A">All Action</option>
      <option value="W">Sports Only</option>
      <option value="K">Casino Only</option>
      <option value="H">Horses Only</option>
    </select>
  </div>
  <div class="form-group  mb-3 form-check">
    <input type="checkbox" class="form-check-input"  [(ngModel)]="showPassword">
    <label class="form-check-label" for="showpassword">Show Password</label>
  </div>
  <div class="form-group mb-3">
    <label for="txtOrderBy">Order By</label>
    <select [(ngModel)]="orderBySelected" class="custom-select">
      <option value="agent">Agent Name</option>
      <option value="player">Player Name</option>
      <option value="pending">Pending</option>
      <option value="balance">Balance</option>
      <option value="total">Total</option>
      <option value="mon">Mon</option>
      <option value="tue">Tue</option>
      <option value="wed">Wed</option>
      <option value="thu">Thu</option>
      <option value="fri">Fri</option>
      <option value="sat">Sat</option>
      <option value="sun">Sun</option>
    </select>
  </div>
  <div class="form-group mb-3">
    <select [(ngModel)]="orderSelected" class="custom-select">
      <option value="A">Asc</option>
      <option value="D">Desc</option>
    </select>
  </div>
  <div class="row mb-2 mt-2">
    <div class="col">
      <button onclick="window.print();" class="btn btn-light btn-smaction-bar-link fa fa-print fa-2x mr-3"></button>
      <button onclick="refresh()" class="btn btn-light btn-sm action-bar-link fa fa-redo fa-2x"></button>
    </div>
  </div>



<button type="button" class="btn btn-primary btn-block mb-3" (click)="GetReport()">Submit</button>
</p-sidebar>


<!-- ******************** Loading div ********************* -->
<div class="my-container">
  <ng-template #customLoadingTemplate>
      <div class="custom-class">
      </div>
  </ng-template>
  <ngx-loading [show]="_loadingReport" [config]="{ backdropBorderRadius: '3px' }" [template]="customLoadingTemplate"></ngx-loading>
</div>


<!--************** Modal Player Transfer ****************** -->

<p-dialog header="Player Transfer" [(visible)]="displayModalPlayerTransfer" [modal]="true" [style]="{width: '50vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
  <div *ngIf="PlayerTransferReturn == 1" class="row alert alert-success alert-dismissible fade show" role="alert">
    Transaction Saved
   <button type="button" class="close" data-dismiss="alert" aria-label="Close">
     <span aria-hidden="true">&times;</span>
   </button>
 </div>
  <div *ngIf="PlayerTransferReturn == 0" class="row alert alert-danger alert-dismissible fade show" role="alert">
   Transaction Failed
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
  </div>
  <div class="row">
    <div  *ngIf="PlayerTransfer != null && PlayerTransfer != undefined" class="form-group col-6">
      <label for="">Player:</label>
    <h2>{{PlayerTransfer.Name}}</h2>
    </div>
    <div class="form-group col-6">
      <label for="ddlTransactionType">Type:</label>
      <select class="form-control" id="ddlTransactionType" [(ngModel)]="_PlayerTransferType">
          <option value="R">Cash In</option>
          <option value="D">Cash Out</option>
      </select>
    </div>
  </div>
  <div class="row">
    <div class="form-group col-6">
      <label for="txtAmount">Amount:</label>
      <input type="number" class="form-control" id="txtAmount" [(ngModel)]="_PlayerTransferAmount">
    </div>
    <div class="form-group col-6">
      <label for="txtNotes">Detail:</label>
      <textarea  class="form-control" id="txtDetail" [(ngModel)]="_PlayerTransferDetail"></textarea>
    </div>
  </div>
  <div class="row">
    <div class=" col-6"></div>
    <div class="form-group col-6">
      <button type="button"  class="btn btn-danger  float-right" (click)="displayModalPlayerTransfer=false">Cancel</button>
      <button type="button" class="btn btn-primary  float-right" (click)="InsertPlayerTransfer()">Submit</button>
    </div>
  </div>

  <div id="accordion">
    <div class="card">
      <div class="card-header" id="headingOne" style="background-color: #333333;">
        <h5 class="mb-0">
          <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"  style="color: #FFFFFF;">
             Latest Transactions
         </button>
        </h5>
      </div>

      <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
        <div class="card-body">
          <table  class="table table-striped table-bordered table-sm">
            <thead class="table-dark">
              <tr>
                <th class="text-center">Date</th>
                <th class="text-center">Amount</th>
                <th class="text-center">Description</th>
                <th class="text-center">Type</th>
              </tr>
            </thead>
            <tbody>
              <tr  class="text-left" *ngFor="let rep of PlayerLatestTransactionReturn; let x = index">
                <td>{{rep.Date}}</td>
                <td>{{rep.Amount}}</td>
                <td>{{rep.description}}</td>
                <td>{{rep.Type}}</td>
            </tr>
           </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</p-dialog>


<!--************** Modal Agent Transfer ****************** -->

<p-dialog header="Agent Transfer" [(visible)]="displayModalAgentTransfer" [modal]="true" [style]="{width: '50vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">

  <div *ngIf="AgentTransferReturn == 0" class="row alert alert-success alert-dismissible fade show" role="alert">
     Transaction Saved
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div *ngIf="AgentTransferReturn == 1" class="row alert alert-danger alert-dismissible fade show" role="alert">
    Transaction Failed
   <button type="button" class="close" data-dismiss="alert" aria-label="Close">
     <span aria-hidden="true">&times;</span>
   </button>
 </div>

  <div class="row">
    <div *ngIf="AgentTransfer != null && AgentTransfer != undefined" class="form-group col-6">
      <label for="">Agent:</label>
      <h2>{{AgentTransfer.Name}}</h2>
    </div>
    <div class="form-group col-6">
      <label for="ddlTransactionType">Type:</label>
      <select class="form-control" id="ddlTransactionType" [(ngModel)]="_AgentTransferType">
          <option value="R">Cash In</option>
          <option value="D">Cash Out</option>
      </select>
    </div>
  </div>
  <div class="row">
    <div class="form-group col-6">
      <label for="txtAmount">Amount:</label>
      <input type="number" class="form-control" id="txtAmount" [(ngModel)]="_AgentTransferAmount">
    </div>
    <div class="form-group col-6">
      <label for="txtdate">Date:</label>
      <input type="date" class="form-control" id="txtdatePlayerTransfer" [(ngModel)]="_AgentTransferDate"
        (ngModelChange)="_AgentTransferDate= $event" aria-describedby="datefrom">
    </div>
  </div>
  <div class="row">
    <div class="form-group col-6">
      <label for="txtNotes">Detail:</label>
      <textarea  class="form-control" id="txtDetail" [(ngModel)]="_AgentTransferDetail"></textarea>
    </div>
  </div>
  <div class="row">
    <div class=" col-6"></div>
    <div class="form-group col-6">
      <button type="button"  class="btn btn-danger  float-right" (click)="displayModalAgentTransfer=false">Cancel</button>
      <button type="button" class="btn btn-primary  float-right" (click)="InsertAgentTransfer()">Submit</button>
    </div>
  </div>

  <div id="accordion">
    <div class="card">
      <div class="card-header" id="headingOne" style="background-color: #333333;">
        <h5 class="mb-0">
          <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"  style="color: #FFFFFF;">
             Latest Transactions
         </button>
        </h5>
      </div>

      <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
        <div class="card-body">
          <table  class="table table-striped table-bordered table-sm">
            <thead class="table-dark">
              <tr>
                <th class="text-center">Date</th>
                <th class="text-center">Amount</th>
                <th class="text-center">Description</th>
                <th class="text-center">Type</th>
              </tr>
            </thead>
            <tbody>
              <tr  *ngFor="let rep of AgentLatestTransactionReturn; let x = index" class="text-left">
                <td>{{rep.Date}}</td>
                <td>{{rep.Amount}}</td>
                <td>{{rep.description}}</td>
                <td>{{rep.Type}}</td>
            </tr>
           </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</p-dialog>


<!--************** Modal Player Information ****************** -->

<p-dialog header="Player Information" [(visible)]="displayModalPlayerInformation" [modal]="true" [style]="{width: '75vw', height:'75vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">

  <div *ngIf="EditPlayerInfomationReturn == 0" class="row alert alert-success alert-dismissible fade show" role="alert">
    Saved Succesfully
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div *ngIf="EditPlayerInfomationReturn == 1" class="row alert alert-danger alert-dismissible fade show" role="alert">
    Saved Failed
 <button type="button" class="close" data-dismiss="alert" aria-label="Close">
   <span aria-hidden="true">&times;</span>
 </button>
</div>


  <ng-container *ngIf="PlayerInformationReturn != null && PlayerInformationReturn != undefined">
  <div class="row">
  <div class="form-group col-6">
      <label for="">Player:</label>
      <h2>{{PlayerInformationReturn.Player}}</h2>
    </div>
   </div>
   <div class="row">
      <div class="form-group col-2">
        <label for="ddlTransactionType">Enable Player:</label>
        <select class="form-control" id="ddlTransactionType"  [(ngModel)]="PlayerInformationReturn.Status">
            <option value="E">Enable</option>
            <option value="D">Disable</option>
        </select>
      </div>
      <div class="form-group form-check col-2">
        <input type="checkbox" class="form-check-input" id="chkSport"  [(ngModel)]="PlayerInformationReturn.EnableSports">
        <label class="form-check-label" for="breadkown">Enable Sports</label>
      </div>
      <div class="form-group form-check col-2">
        <input type="checkbox" class="form-check-input" id="chkOnline"  [(ngModel)]="PlayerInformationReturn.OnlineAccess" >
        <label class="form-check-label" for="breadkown">Enable Online</label>
      </div>
      <div class="form-group form-check col-2">
        <input type="checkbox" class="form-check-input" id="chkCasino"  [(ngModel)]="PlayerInformationReturn.EnableCasino">
        <label class="form-check-label" for="breadkown">Enable Casino</label>
      </div>
      <div class="form-group form-check col-2">
        <input type="checkbox" class="form-check-input" id="chkHorses"  [(ngModel)]="PlayerInformationReturn.EnableHorses">
        <label class="form-check-label" for="breadkown">Enable Horses</label>
      </div>
      <div class="form-group form-check col-2">
        <input type="checkbox" class="form-check-input" id="chkParlayCards"  [(ngModel)]="PlayerInformationReturn.EnableCards" >
        <label class="form-check-label" for="breadkown">Parlay Cards</label>
      </div>
   </div>
  <div class="row">
    <div class="form-group col-4">
      <label for="txtAmount">Name:</label>
      <input type="text" class="form-control" id="TXTName" [(ngModel)]="PlayerInformationReturn.Name">
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Last Name:</label>
      <input type="text" class="form-control" id="TXTLastname" [(ngModel)]="PlayerInformationReturn.LastName">
    </div>
  </div>
  <div class="row">
    <div class="form-group col-4">
      <label for="txtAmount">Settled Figure::</label>
      <input type="number" class="form-control" id="TXTSettleFigure" [(ngModel)]="PlayerInformationReturn.SettledFigure" >
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Password:</label>
      <input type="text" class="form-control" id="TXTPassword" [(ngModel)]="PlayerInformationReturn.Password">
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Online Password:</label>
      <input type="text" class="form-control" id="TXTOnlinePassword" [(ngModel)]="PlayerInformationReturn.OnlinePassword" >
    </div>
  </div>
  <div class="row">
    <div class="form-group col-4">
      <label for="txtAmount">Credit Limit:</label>
      <input type="number" class="form-control" id="TXTCreditLimit" [(ngModel)]="PlayerInformationReturn.CreditLimit">
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Online Max Wager:</label>
      <input type="number" class="form-control" id="TXTOnlineMaxWager" [(ngModel)]="PlayerInformationReturn.OnlineMaxWager">
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Online Min Wager:</label>
      <input type="number" class="form-control" id="TXTOnlineMinWager" [(ngModel)]="PlayerInformationReturn.OnlineMinWager">
    </div>
  </div>
  <div class="row">
    <div class="form-group col-4">
      <label for="txtAmount">Max Wager:</label>
      <input type="number" class="form-control" id="TXTMaxWager" [(ngModel)]="PlayerInformationReturn.MaxWager">
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Min Wager:</label>
      <input type="number" class="form-control" id="TXTMinWager" [(ngModel)]="PlayerInformationReturn.MinWager">
    </div>
    <div class="form-group col-4"></div>
  </div>
  <div class="row">
    <div class="form-group col-4">
      <label for="txtAmount">Temp Credit:</label>
      <input type="number" class="form-control" id="TXTTempCredit" [(ngModel)]="PlayerInformationReturn.Temp_Credit">
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Temp Credit Expire:</label>
      <input type="text" class="form-control" id="txtdatePlayerTransfer" [(ngModel)]="PlayerInformationReturn.Temp_Credit_Expire" >
    </div>

    <div class="form-group col-4">
    </div>
  </div>
  <div class="row">
    <div class="form-group col-4">
      <label for="txtAmount">Current Balance:</label>
      <input type="number" class="form-control" id="TXTCurrentBalance" readonly [(ngModel)]="PlayerInformationReturn.Current_Balance">
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Avalable Balance:</label>
      <input type="number" class="form-control" id="TXTAvailableBalanc3e" readonly [(ngModel)]="PlayerInformationReturn.RealAvailable ">
    </div>
    <div class="form-group col-4">
     </div>
  </div>
  <div class="row">
    <div class="form-group col-4">
      <label for="txtAmount">Lifetime Sports</label>
      <input type="number" class="form-control" id="TXTLifetimeSports" readonly [(ngModel)]="PlayerInformationReturn.LifetimeSports" >
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Lifetime Horses:</label>
      <input type="number" class="form-control" id="TXTLifetimeHorses" readonly [(ngModel)]="PlayerInformationReturn.Lifetime_Net_Horses" >
    </div>
    <div class="form-group col-4">
      <label for="txtAmount">Lifetime Overall:</label>
      <input type="number" class="form-control" id="TXTLifetimeOverall" readonly [(ngModel)]="PlayerInformationReturn.LifeTimeOverall">
    </div>
  </div>
  <div class="row">
    <div class=" col-6"></div>
    <div class="form-group col-6">
      <button type="button"  class="btn btn-danger  float-right" (click)="displayModalPlayerInformation=false">Cancel</button>
      <button type="button" class="btn btn-primary  float-right" (click)="EditPlayerInformation()" >Submit</button>
    </div>
  </div>

  <div id="accordion">
    <div class="card">
      <div class="card-header" id="headingOne" style="background-color: #333333;">
        <h5 class="mb-0">
          <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"  style="color: #FFFFFF;">
             Balance Information
         </button>
        </h5>
      </div>

      <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
        <div class="card-body">
          <div class="row">
            <div class="form-group col-4">
              <label for="txtAmount">Currrent Balance:</label>
              <label>{{PlayerInformationReturn.Current_Balance}}</label>
            </div>
            <div class="form-group col-4">
              <label for="txtAmount">At Risk:</label>
              <label>{{PlayerInformationReturn.Amount_at_Risk}}</label>
            </div>
            <div class="form-group col-4">
              <label for="txtAmount">Available Balance:</label>
              <label>{{PlayerInformationReturn.Available_Balance }}</label>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-4">
              <label for="txtAmount">Bonus Points:</label>
              <label >{{PlayerInformationReturn.Bonus_Points}}</label>
            </div>
            <div class="form-group col-4">
              <label for="txtAmount">Free Play:</label>
              <label>{{PlayerInformationReturn.Free_Play}}</label>
            </div>
            <div class="form-group col-4"></div>
          </div>
          <h3>LifeTime</h3><hr>
          <div class="row">
            <div class="form-group col-4">
              <label for="txtAmount">Win:</label>
              <label>{{PlayerInformationReturn.Lifetime_Win}}</label>
            </div>
            <div class="form-group col-4">
              <label for="txtAmount">Lose:</label>
              <label>{{PlayerInformationReturn.Lifetime_Lose}}</label>
            </div>
            <div class="form-group col-4">
              <label for="txtAmount">Free Play:</label>
              <label>{{PlayerInformationReturn.Lifetime_Free_Plays}}</label>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-4">
              <label for="txtAmount">Net:</label>
              <label>{{PlayerInformationReturn.Lifetime_Net}}</label>
            </div>
            <div class="form-group col-4">
              <label for="txtAmount">Net Casino:</label>
              <label>{{PlayerInformationReturn.Lifetime_Net_Casino}}</label>
            </div>
            <div class="form-group col-4">
              <label for="txtAmount">Net Horses:</label>
              <label>{{PlayerInformationReturn.Lifetime_Net_Horses}}</label>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-4">
              <label for="txtAmount">Total:</label>
              <label>{{PlayerInformationReturn.Lifetime_Total}}</label>
            </div>
            <div class="form-group col-4"></div>
            <div class="form-group col-4"></div>
          </div>
       </div>
      </div>
    </div>
  </div>
</ng-container>
</p-dialog>


<!--************** Modal Agent Information ****************** -->

<p-dialog header="Agent Information" [(visible)]="displayModalAgentInformation" [modal]="true" [style]="{width: '50vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">

  <div *ngIf="EditAgentInfomationReturn == 0" class="row alert alert-success alert-dismissible fade show" role="alert">
     Saved Succesfully
   <button type="button" class="close" data-dismiss="alert" aria-label="Close">
     <span aria-hidden="true">&times;</span>
   </button>
 </div>

 <div *ngIf="EditAgentInfomationReturn == 1" class="row alert alert-danger alert-dismissible fade show" role="alert">
     Saved Failed
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div *ngIf="AgentInformationReturn != undefined && AgentInformationReturn != null">
  <!-- <ng-container *ngFor="let Agentinformation of AgentInformationReturn; let x = index"> -->
  <h4>Agent: {{AgentInformationReturn.Agent}}</h4>
  <div class="row">
    <div class="form-group col-3">
      <label for="txtAmount">Name:</label>
      <input type="text" class="form-control" id="TXTAgentName" [(ngModel)]="AgentInformationReturn.Name">
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">Password:</label>
      <input type="text" class="form-control" id="TXTAgentPassword" [(ngModel)]="AgentInformationReturn.Password">
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">Address 1:</label>
      <input type="text" class="form-control" id="TXTAgentAddress" [(ngModel)]="AgentInformationReturn.Address1">
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">Address 2:</label>
      <input type="text" class="form-control" id="TXTAgentAddress2" [(ngModel)]="AgentInformationReturn.Address2">
    </div>
  </div>
  <div class="row">
    <div class="form-group col-3">
      <label for="txtAmount">City:</label>
      <input type="text" class="form-control" id="TXTAgentCity" [(ngModel)]="AgentInformationReturn.City">
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">State:</label>
      <input type="text" class="form-control" id="TXTAgentState" [(ngModel)]="AgentInformationReturn.State">
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">Country:</label>
      <input type="text" class="form-control" id="TXTAgentCountry" [(ngModel)]="AgentInformationReturn.Country">
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">Zip:</label>
      <input type="text" class="form-control" id="TXTAgentZip" [(ngModel)]="AgentInformationReturn.Zip">
    </div>
  </div>
  <div class="row">
    <div class="form-group col-3">
      <label for="txtAmount">Phone:</label>
      <input type="text" class="form-control" id="TXTAgentPhone" [(ngModel)]="AgentInformationReturn.Phone" >
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">Fax:</label>
      <input type="text" class="form-control" id="TXTAgentFax" [(ngModel)]="AgentInformationReturn.Fax">
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">Email:</label>
      <input type="text" class="form-control" id="TXTAgentEmail" [(ngModel)]="AgentInformationReturn.Email">
    </div>
    <div class="form-group col-3">
      <label for="txtAmount">Online Message:</label>
      <textarea  class="form-control" id="TXTAgentOnlineMessage" [(ngModel)]="AgentInformationReturn.OnlineMessage"></textarea>
    </div>
  </div>
  <div class="row">
    <div class=" col-6"></div>
    <div class="form-group col-6">
      <button type="button"  class="btn btn-danger  float-right" (click)="displayModalAgentInformation=false">Cancel</button>
      <button type="button" class="btn btn-primary  float-right"  (click)="EditAgentInformation()">Submit</button>
    </div>
  </div>
</div>
<!-- </ng-container> -->
</p-dialog>


<!--************** Modal Player History ****************** -->

<p-dialog header="Player History" [(visible)]="displayModalPlayerHistory" [modal]="true" [style]="{width: '75vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
<div class="row">
    <div class="card-body">
      <table  class="table table-striped table-bordered table-sm">
        <thead class="table-dark">
          <tr class="text-center">
            <th>Agent</th>
            <th>Player</th>
            <th>Ticket</th>
            <th>Phone/User</th>
            <th>Placed</th>
            <th>Wager</th>
            <th>Game Selection</th>
            <th>Risk/Win</th>
            <th>Game Result</th>
            <th>Score</th>
            <th>Win/Loss</th>
            <th>Game Date/Time</th>
          </tr>
        </thead>
        <tbody>
          <tr  class="text-left" *ngFor="let History of reportPlayerHistory; let x = index">
            <td>{{History.Agent}}</td>
            <td>{{History.Player}}</td>
            <td>{{History.Result01}}</td>
            <td>{{History.Result02}}</td>
            <td>{{History.Result03}}</td>
            <td>{{History.Result04}}</td>
            <td [innerHTML]="History.Result05"></td>
            <td>{{History.Result06}}</td>
            <td [innerHTML]="History.Result07"></td>
            <td [innerHTML]="History.Result08"></td>
            <td>{{History.Result09 | number:'1.2'}}</td>
            <td>{{History.Result10}}</td>
        </tr>
       </tbody>
      </table>
    </div>
  </div>
</p-dialog>


<!--************** Modal Player Pending ****************** -->

<p-dialog header="Open Bets" [(visible)]="displayModalPlayerPending" [modal]="true" [style]="{width: '75vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
  <div class="row">
      <div class="card-body">
        <table  class="table table-striped table-bordered table-sm">
          <thead class="table-dark">
            <tr class="text-center">
              <th>Placed</th>
              <th>User/Phone</th>
              <th>Game Date</th>
              <th>Sport</th>
              <th>Type</th>
              <th>Description</th>
              <th>Risk/Win</th>
            </tr>
          </thead>
          <tbody *ngIf="reportPlayerPending != null && reportPlayerPending != undefined">
            <tr *ngFor="let hist of reportPlayerPending.wagers" >
              <td>{{hist._PlacedDate + ' ' + hist._PlacedTime | date:'MM-dd-yyyy h:mm a' : '-8'}}</td>
              <td>{{hist._UserName}}</td>
             <td>
                <ul *ngFor="let value1 of hist.details">
                  <li>{{value1._GameDate }} {{ value1._GameDate + ' ' +  value1._GameTime | date:'h:mm a' : '-8'}}</li>
                </ul>
              </td>
              <td>
                <ul *ngFor="let value1 of hist.details">
                  <li>{{value1._IdSport}}</li>
                </ul>
              </td>
              <td>{{hist._HeaderDesc}}</td>
             <td>
                <ul *ngFor="let value1 of hist.details">
                  <li [innerHTML]="value1._DetailDesc"></li>
                </ul>
              </td>
              <td>{{hist._RiskAmount}}/{{hist._WinAmount}}</td>
             </tr>
         </tbody>
        </table>
      </div>
    </div>
  </p-dialog>




<!--************** Modal HightLight  Color ****************** -->

<p-dialog header="HightLight Color" [(visible)]="displayModalHightLight" [modal]="true" [style]="{width: '25vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">

  <div class="row" >
    <div  ng-app class="form-group form-inline col-80">
      <label >Color:</label>
      <input class="form-control"  type="text" [(ngModel)]="rowcolor"  readonly/>
    </div>
    <div  ng-app class="form-group  col-4">
      <input class="form-control"  type="color" [(ngModel)]="rowcolor" name="hi" id="" />
    </div>
  </div>
  <div class="row" >
    <div  class="form-group form-inline col-80">

      {{ColorList | json}}
      <ng-container *ngIf="ColorList.length > 0">
        <label>My Colors:</label>
          <ng-container *ngFor="let Colors of ColorList; let x = index">
                <mat-button  class="btn" style="border-color: black;" [ngStyle]="{'background-color': (Colors.Color != undefined && Colors.Color != null && Colors.Color !=  '') ? '#'+Colors.Color :''}" [(ngModel)]="Colors.Color" (click)="PickColor(Colors)" name="{{ 'object-' + Colors.Color }}" ngDefaultControl><i class='fa fa-tint'></i> </mat-button>
          </ng-container >
      </ng-container>
    </div>
  </div>
  <br><br>
  <div class="row">
    <div class=" col-6"></div>
    <div class="form-group col-6">
      <button type="button"  class="btn btn-danger  float-right" (click)="displayModalHightLight=false">Cancel</button>
      <button type="button" class="btn btn-primary  float-right" (click)="SaveColor()">Submit</button>
    </div>
  </div>
</p-dialog>


<!--************** Modal Player Note ****************** -->

<p-dialog header="Player Note" [(visible)]="displayModalPlayerNote" [modal]="true" [style]="{width: '25vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">

  <div class="row" >
    <div  ng-app class="form-group col-12">
      <label >Note:</label>
      <textarea class="form-control"  type="text" [(ngModel)]="Note" maxlength="255"></textarea>
    </div>

  </div>

  <br><br>
  <div class="row">
    <div class=" col-6"></div>
    <div class="form-group col-6">
      <button type="button"  class="btn btn-danger  float-right" (click)="displayModalPlayerNote=false">Cancel</button>
      <button type="button" class="btn btn-primary  float-right" (click)="SaveNote()">Submit</button>
    </div>
  </div>
</p-dialog>



<!--************** Modal Player Online Message ****************** -->

<p-dialog header="Player Online Message" [(visible)]="displayModalPlayerOnlineMessage" [modal]="true" [style]="{width: '25vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
  <ng-container *ngFor="let Messages of MessageList; let x = index">
  <div class="row" >
    <div  class="form-group col-12">
      <label >Message:</label>
      <textarea class="form-control"  type="text" [(ngModel)]="Messages.OnlineMessage" maxlength="100"></textarea>
    </div>
  </div>
  </ng-container>
  <br><br>
  <div class="row">
    <div class=" col-6"></div>
    <div class="form-group col-6">
      <button type="button"  class="btn btn-danger  float-right" (click)="displayModalPlayerOnlineMessage =false">Cancel</button>
      <button type="button" class="btn btn-primary  float-right" (click)="SaveOlineMessage()">Submit</button>
    </div>
  </div>
</p-dialog>
